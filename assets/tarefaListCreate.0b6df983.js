var m=Object.defineProperty;var g=(t,e,a)=>e in t?m(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var i=(t,e,a)=>(g(t,typeof e!="symbol"?e+"":e,a),a);import"./modulepreload-polyfill.c7c6310f.js";import{E as p}from"./entidadeBase.model.63a43782.js";class u{constructor(){i(this,"localStorage");i(this,"tarefas");this.localStorage=window.localStorage,this.tarefas=this.selecionarTodos()}gravar(){const e=JSON.stringify(this.tarefas);this.localStorage.setItem("tarefas",e)}inserir(e){this.tarefas.push(e),this.gravar()}editar(e,a){const r=this.tarefas.findIndex(o=>o.id===e);this.tarefas[r]={id:e,descricao:a.descricao,dataCriacao:a.dataCriacao,prioridade:a.prioridade},this.gravar()}excluir(e){this.tarefas=this.tarefas.filter(a=>a.id!==e),this.gravar()}selecionarTodos(){const e=this.localStorage.getItem("tarefas");return e?JSON.parse(e):[]}selecionarPorId(e){return this.tarefas.find(a=>a.id===e)}}class b{constructor(e){i(this,"tabela");this.repositorioTarefas=e,this.configurarElementos(),this.atualizarTabela()}configurarElementos(){this.tabela=document.getElementById("tabela")}atualizarTabela(){const e=this.repositorioTarefas.selecionarTodos();let a=this.tabela.getElementsByTagName("tbody")[0];e.forEach(r=>{const o=a.insertRow();Object.values(r).forEach(s=>{const f=o.insertCell();f.innerText=s});const d=o.insertCell(),n=document.createElement("a");n.innerText="Editar",n.className="btn btn-outline-success me-1",n.addEventListener("click",()=>{const s=o.cells[0].innerText;window.location.href=`tarefa.html?id=${s}`});const c=document.createElement("a");c.innerText="Excluir",c.className="btn btn-outline-danger",c.addEventListener("click",()=>{const s=r.id;this.repositorioTarefas.excluir(s),window.location.reload()}),d.appendChild(n),d.appendChild(c)})}}new b(new u);var l=(t=>(t.Baixa="Baixa",t.Normal="Normal",t.Alta="Alta",t))(l||{});class h extends p{constructor(a,r,o){super();i(this,"descricao");i(this,"dataCriacao");i(this,"prioridade");o&&(this.id=o),this.descricao=a,this.prioridade=r,this.dataCriacao=new Date}}class S{constructor(e,a){i(this,"txtDescricao");i(this,"selectPrioridade");i(this,"btnSalvar");i(this,"idSelecionado");if(this.repositorioTarefas=e,this.configurarElementos(),a){this.idSelecionado=a;const r=this.repositorioTarefas.selecionarPorId(a);r&&this.preencherFormulario(r)}}preencherFormulario(e){switch(this.txtDescricao.value=e.descricao,this.selectPrioridade=document.getElementById("inputGroupSelectCategoria"),e.prioridade){case l.Baixa:this.selectPrioridade.selectedIndex=0;break;case l.Normal:this.selectPrioridade.selectedIndex=1;break;case l.Alta:this.selectPrioridade.selectedIndex=2;break}}configurarElementos(){this.txtDescricao=document.getElementById("titulo"),this.btnSalvar=document.getElementById("btnSalvar"),this.btnSalvar.addEventListener("click",e=>this.gravarRegistros())}gravarRegistros(){const e=this.obterDadosFormulario();this.idSelecionado?this.repositorioTarefas.editar(e.id,e):this.repositorioTarefas.inserir(e),window.location.href="tarefa.html"}obterDadosFormulario(){const e=this.txtDescricao.value,a=this.obterPrioridadeSelecionada();let r=null;return this.idSelecionado?r=new h(e,a,this.idSelecionado):r=new h(e,a),r}obterPrioridadeSelecionada(){return this.selectPrioridade=document.getElementById("inputGroupSelectCategoria"),this.selectPrioridade.options[this.selectPrioridade.selectedIndex].value,this.selectPrioridade.value}}const v=new URLSearchParams(window.location.search),x=v.get("id");new S(new u,x);
